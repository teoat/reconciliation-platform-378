apiVersion: v1
kind: Secret
metadata:
  name: reconciliation-secrets
  namespace: reconciliation-platform
  labels:
    app: reconciliation-platform
    managed-by: kubernetes
type: Opaque
stringData:
  # ============================================================================
  # REQUIRED SECRETS - Must be set in production
  # ============================================================================
  
  # JWT Authentication (Required)
  JWT_SECRET: "CHANGE_ME_IN_PRODUCTION_MIN_32_CHARS"
  JWT_REFRESH_SECRET: ""  # Optional, falls back to JWT_SECRET if not set
  JWT_EXPIRATION: "3600"
  
  # Database (Required)
  DATABASE_URL: "postgresql://postgres:CHANGE_ME@postgres-service:5432/reconciliation?sslmode=disable"
  POSTGRES_USER: "postgres"
  POSTGRES_PASSWORD: "CHANGE_ME_IN_PRODUCTION_MIN_16_CHARS"
  DB_PASSWORD: ""  # Alternative to DATABASE_URL password
  
  # CSRF Protection (Required)
  CSRF_SECRET: "CHANGE_ME_IN_PRODUCTION_MIN_32_CHARS"
  
  # Password Manager (Required)
  PASSWORD_MASTER_KEY: "CHANGE_ME_IN_PRODUCTION_MIN_32_CHARS"
  
  # ============================================================================
  # OPTIONAL SECRETS - Set based on enabled features
  # ============================================================================
  
  # Redis (Optional)
  REDIS_URL: "redis://redis-service:6379/0"
  REDIS_PASSWORD: ""  # Optional Redis authentication
  
  # Google OAuth (Optional)
  GOOGLE_CLIENT_ID: ""
  GOOGLE_CLIENT_SECRET: ""
  VITE_GOOGLE_CLIENT_ID: ""  # Frontend Google Client ID
  
  # Email/SMTP (Optional)
  SMTP_PASSWORD: ""
  
  # Payment Processing (Optional)
  STRIPE_SECRET_KEY: ""
  STRIPE_WEBHOOK_SECRET: ""
  
  # API Authentication (Optional)
  API_KEY: ""
  
  # Monitoring (Optional)
  GRAFANA_PASSWORD: ""
  SENTRY_DSN: ""
  
  # Backup & Storage (Optional)
  BACKUP_ENCRYPTION_KEY: ""
  AWS_ACCESS_KEY_ID: ""
  AWS_SECRET_ACCESS_KEY: ""
  
---
# ============================================================================
# SECRET MANAGEMENT NOTES
# ============================================================================
# 
# 1. GENERATION:
#    Generate secure secrets using:
#    openssl rand -base64 48  # For 32+ char secrets
#    openssl rand -base64 24   # For 16+ char secrets
#
# 2. PRODUCTION SETUP:
#    kubectl create secret generic reconciliation-secrets \
#      --from-literal=JWT_SECRET='$(openssl rand -base64 48)' \
#      --from-literal=CSRF_SECRET='$(openssl rand -base64 48)' \
#      --from-literal=POSTGRES_PASSWORD='$(openssl rand -base64 24)' \
#      --from-literal=PASSWORD_MASTER_KEY='$(openssl rand -base64 48)' \
#      -n reconciliation-platform
#
# 3. EXTERNAL SECRET MANAGEMENT:
#    - External Secrets Operator (recommended)
#    - HashiCorp Vault
#    - AWS Secrets Manager
#    - Azure Key Vault
#    - GCP Secret Manager
#
# 4. ROTATION SCHEDULE:
#    - JWT_SECRET: Every 90 days
#    - CSRF_SECRET: Every 180 days
#    - DB_PASSWORD: Every 180 days
#    - PASSWORD_MASTER_KEY: Every 365 days
#
# 5. VALIDATION:
#    All secrets are validated on application startup.
#    Required secrets must be at least the minimum length specified.
#
# ============================================================================
# Note: This is a template file. In production, use external secret management
# tools or kubectl to create secrets securely. Never commit actual secrets.

