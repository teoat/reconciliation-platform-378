# Production Environment Configuration
# Copy this file to production.env and fill in actual values
# NEVER commit production.env to version control

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Environment
ENVIRONMENT=production
LOG_LEVEL=info

# Application
APP_NAME=378 Reconciliation Platform
APP_VERSION=1.0.0
BACKEND_PORT=2000
FRONTEND_PORT=1000

# ============================================================================
# PORT CONFIGURATION
# ============================================================================
# Port mappings for Docker services (Host:Container)
# 
# Application Ports:
# - BACKEND_PORT=2000        # Backend API service
# - FRONTEND_PORT=1000       # Frontend web application
#
# Database Ports:
# - POSTGRES_PORT=5432       # PostgreSQL direct access (development only)
# - PGBOUNCER_PORT=6432      # PgBouncer connection pooler (recommended for production)
# - REDIS_PORT=6379          # Redis cache
#
# Monitoring Ports (optional - can be internal only in production):
# - PROMETHEUS_PORT=9090   # Prometheus metrics
# - GRAFANA_PORT=3001       # Grafana dashboards
# - ELASTICSEARCH_PORT=9200 # Elasticsearch
# - KIBANA_PORT=5601        # Kibana UI
# - LOGSTASH_PORT=5044       # Logstash Beats input (required for Filebeat)
# - LOGSTASH_HTTP_PORT=9600  # Logstash HTTP API for monitoring (required)
# - APM_PORT=8200           # APM Server
#
# Security Note: In production, only expose Backend (2000) and Frontend (1000)
# All other ports should be internal-only or behind a firewall

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Connection
# Use managed service URL or connection string
DATABASE_URL=postgresql://reconciliation_user:CHANGE_ME@postgres-host:5432/reconciliation_app

# Database Pool Configuration
DB_POOL_MAX_SIZE=20
DB_POOL_MIN_IDLE=5

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis Connection
# Use managed service URL
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@redis-host:6379

# Redis Pool Configuration
REDIS_POOL_MAX_SIZE=50
REDIS_CONNECTION_TIMEOUT=5000

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# JWT Secret (IMPORTANT: Use strong random secret)
# Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE_THIS_TO_RANDOM_64_CHARACTER_STRING_FOR_PRODUCTION
JWT_EXPIRATION=86400

# CORS Origins (comma-separated)
CORS_ORIGINS=https://reconciliation.platform.com,https://app.reconciliation.platform.com

# Security Features
ENABLE_CSRF=true
ENABLE_RATE_LIMITING=true
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600

# Zero Trust Security
ZERO_TRUST_REQUIRE_MTLS=true
ZERO_TRUST_REQUIRE_IDENTITY_VERIFICATION=true
ZERO_TRUST_ENFORCE_LEAST_PRIVILEGE=true
ZERO_TRUST_NETWORK_SEGMENTATION=true

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================

# Automated Backups
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_S3_BUCKET=reconciliation-production-backups
BACKUP_ENCRYPTION_KEY=CHANGE_THIS_TO_32_BYTE_ENCRYPTION_KEY
AWS_REGION=us-east-1

# ============================================================================
# AWS SECRETS MANAGER (Optional but Recommended)
# ============================================================================

# Use AWS Secrets Manager for sensitive values
USE_SECRETS_MANAGER=false
AWS_SECRETS_MANAGER_REGION=us-east-1
JWT_SECRET_NAME=production/jwt_secret
DATABASE_URL_NAME=production/database_url
REDIS_URL_NAME=production/redis_url

# AWS Credentials (for Secrets Manager and S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Sentry Error Tracking
SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID
SENTRY_ENVIRONMENT=production

# Monitoring Endpoints
HEALTH_CHECK_PATH=/api/health
READINESS_CHECK_PATH=/api/ready
METRICS_PATH=/api/metrics

# ============================================================================
# FILE HANDLING
# ============================================================================

MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================

# SMTP Configuration
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME
SMTP_FROM=noreply@reconciliation.platform.com

# ============================================================================
# ALERTING CONFIGURATION
# ============================================================================

# AlertManager
ALERTMANAGER_URL=http://alertmanager:9093

# Slack Webhook
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# PagerDuty
PAGERDUTY_SERVICE_KEY=YOUR_PAGERDUTY_KEY

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Worker Threads
WORKER_THREADS=4

# Timeout Settings
REQUEST_TIMEOUT=30
DATABASE_TIMEOUT=10

# ============================================================================
# DEVELOPMENT/DEBUGGING (Set to false in production)
# ============================================================================

DEBUG=false
VERBOSE_LOGGING=false

